<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_script">
  <sys_transform_script action="INSERT_OR_UPDATE">
    <active>true</active>
    <map display_value="Load Purchase Order Data">d1f781c0b752001030bbf238ee11a944</map>
    <order>100</order>
    <script><![CDATA[(function runTransformScript(source, map, log, target /*undefined onStart*/ ) {

    if (source.op_status == 'error' || gs.nil(source.po_id) || gs.nil(source.pol_id) ||
        gs.nil(source.erp_po_num) || gs.nil(source.erp_pol_num) ||
        (sn_shop.PurchaseOrderLineUtil.hasFixedAssetsForOrderLine(source.pol_id) ? gs.nil(source.asset_id) : false)) {

        ignore = true;
        var requisitionId = sn_shop.PurchaseOrder.getBackingRequisitionId(source.po_id);
        sn_shop.SpendTaskUtil.createPOIntegrationErrorTask(requisitionId, source.msg);
        new sn_shop.PurchaseRequisitionUtil(requisitionId).updatePostedToERPFlagOfPurchaseRequisition('failed');

    }

})(source, map, log, target);]]></script>
    <sys_class_name>sys_transform_script</sys_class_name>
    <sys_created_by>admin</sys_created_by>
    <sys_created_on>2020-01-09 08:25:27</sys_created_on>
    <sys_id>b1e9106cb79a001030bbf238ee11a90e</sys_id>
    <sys_mod_count>5</sys_mod_count>
    <sys_name>onBefore</sys_name>
    <sys_package display_value="Finance - ERP Integration" source="sn_fcms_intg">0b4eadd1531113008f12ddeeff7b126d</sys_package>
    <sys_policy/>
    <sys_scope display_value="Finance - ERP Integration">0b4eadd1531113008f12ddeeff7b126d</sys_scope>
    <sys_update_name>sys_transform_script_b1e9106cb79a001030bbf238ee11a90e</sys_update_name>
    <sys_updated_by>admin</sys_updated_by>
    <sys_updated_on>2020-04-16 13:20:59</sys_updated_on>
    <when>onBefore</when>
  </sys_transform_script>
</record_update>
