<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_entry">
  <sys_transform_entry action="DELETE">
    <choice_action>ignore</choice_action>
    <coalesce>false</coalesce>
    <coalesce_case_sensitive>false</coalesce_case_sensitive>
    <coalesce_empty_fields>false</coalesce_empty_fields>
    <date_format>yyyy-MM-dd HH:mm:ss</date_format>
    <map display_value="Update Close Task">1dde558e532113008f12ddeeff7b12ba</map>
    <reference_value_field/>
    <source_field>[Script]</source_field>
    <source_script><![CDATA[answer = (function transformEntry(source) {	
	var responseType = source.getValue('response_type');
	var result = source.getValue('result');
	var currentState = target.state;
	
	if(!gs.nil(responseType)){
		responseType = responseType.toUpperCase();
	}

	if(!gs.nil(result)){
		result = result.toUpperCase();
	}
	
	var returnValue = target.state;
	
	if(responseType == 'PARK' && result == 'SUCCESS' && currentState == x_trint_fcms.FcmsConstants.IN_PROGRESS){
		if(target.review_needed)
			returnValue = x_trint_fcms.FcmsConstants.PENDING_REVIEW;
		else
			returnValue = x_trint_fcms.FcmsConstants.PENDING_APPROVAL;
	}else if(responseType == 'PARK' && result != 'SUCCESS' && currentState == x_trint_fcms.FcmsConstants.IN_PROGRESS)
		returnValue = x_trint_fcms.FcmsConstants.IN_PROGRESS;
	else if(responseType == 'POST' && result == 'SUCCESS' && (currentState == x_trint_fcms.FcmsConstants.JE_STATUS_POST_IN_PROGRESS || currentState == x_trint_fcms.FcmsConstants.PENDING_JE_POSTING) )
		returnValue = x_trint_fcms.FcmsConstants.COMPLETED;
	else if(responseType == 'POST' && result != 'SUCCESS' && (currentState == x_trint_fcms.FcmsConstants.JE_STATUS_POST_IN_PROGRESS || currentState == x_trint_fcms.FcmsConstants.PENDING_JE_POSTING))
		returnValue = x_trint_fcms.FcmsConstants.PENDING_JE_POSTING;
	
	return returnValue;
	
})(source);]]></source_script>
    <source_table>sn_fcms_intg_parkpostresponse</source_table>
    <sys_class_name>sys_transform_entry</sys_class_name>
    <sys_created_by>admin</sys_created_by>
    <sys_created_on>2018-05-02 23:06:56</sys_created_on>
    <sys_id>360f0056537113008f12ddeeff7b1252</sys_id>
    <sys_mod_count>6</sys_mod_count>
    <sys_name>[Script]</sys_name>
    <sys_package display_value="Financial Close Management System - ERP Integration" source="sn_fcms_intg">0b4eadd1531113008f12ddeeff7b126d</sys_package>
    <sys_policy/>
    <sys_scope display_value="Financial Close Management System - ERP Integration">0b4eadd1531113008f12ddeeff7b126d</sys_scope>
    <sys_update_name>sys_transform_entry_360f0056537113008f12ddeeff7b1252</sys_update_name>
    <sys_updated_by>admin</sys_updated_by>
    <sys_updated_on>2018-06-04 04:44:05</sys_updated_on>
    <target_field>state</target_field>
    <target_table>x_trint_fcms_close_task</target_table>
    <use_source_script>true</use_source_script>
  </sys_transform_entry>
</record_update>
